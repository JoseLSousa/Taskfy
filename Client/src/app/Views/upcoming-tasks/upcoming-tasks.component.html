<div class="container mt-3 pb-2 rounded-3 shadow-lg" style="background-color: white;">
  <!-- Header -->
  <div class="row d-flex align-items-center">
    <div class="col-5 col-lg-3 d-flex justify-content-center mb-3 mb-md-0">
      <button class="btn btn-primary me-1" href="#offcanvasSidebar" data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar">
        <i class="bi bi-list"></i>
        Menu
      </button>
      <button class="btn btn-primary" (click)="selectTaskAndToggleSidebar(null)">
        <i class="bi bi-plus-square"></i> Nova Tarefa
      </button>
    </div>
    <div class="col-7 col-lg-9 d-flex justify-content-start">
      <div class="d-flex align-items-center">
        <div class="fs-1 me-lg-3 fw-bold">Tarefas futuras</div>
        <div class="fs-1 badge py-1 px-2">{{thisWeekTasks.length }}</div>
      </div>
    </div>
    <hr />
  </div>

  <!-- Today Tasks -->
  <div class="row d-flex justify-content-center mb-2">
    <div class="col-11 border p-3 rounded-3">
      <h6>Hoje</h6>
      <div class="list-group mb-1" *ngFor="let task of todayTasks">
        <button class="list-group-item d-flex justify-content-between align-items-center Task"
          (click)="selectTaskAndToggleSidebar(task)">
          <div class="d-flex">
            <input type="checkbox" />
            <div class="ms-3 d-flex flex-column align-content-start">{{task.title}}</div>
            <div class="d-flex">
              <i class="bi bi-calendar-x me-2"></i>
              <p class="mb-0">{{ task.endDate | date: 'dd/MM/yyyy' }}</p>
            </div>
          </div>
          <i class="bi bi-caret-right"></i>
        </button>
      </div>
      <div *ngIf="todayTasks.length === 0" class="text-muted text-center mt-2">
        Nenhuma tarefa para hoje.
      </div>
    </div>
  </div>

  <!-- Tomorrow Tasks -->
  <div class="row d-flex justify-content-around">
    <div class="col-11 col-lg-5 border p-3 rounded-3 mb-2">
      <h6>AmanhÃ£</h6>
      <div class="list-group list-group-flush w-100 border-bottom" *ngFor="let task of tomorrowTasks">
        <button class="list-group-item d-flex justify-content-between align-items-center Task"
          (click)="selectTaskAndToggleSidebar(task)">
          <div class="d-flex">
            <input type="checkbox" />
            <div class="ms-3">
              <h6 class="fw-bold text-start">{{ task.title }}</h6>
              <div class="d-flex">
                <i class="bi bi-calendar-x me-2"></i>
                <p class="mb-0">{{ task.endDate | date: 'dd/MM/yyyy' }}</p>
              </div>
            </div>
          </div>
          <i class="bi bi-caret-right"></i>
        </button>
      </div>
      <div *ngIf="tomorrowTasks.length === 0" class="text-muted text-center mt-2">
        Nenhuma tarefa para amanhÃ£.
      </div>
    </div>

    <!-- This Week Tasks -->
    <div class="col-11 col-lg-5 border p-3 rounded-3">
      <h6>Esta semana</h6>
      <div class="list-group list-group-flush w-100 border-bottom" *ngFor="let task of thisWeekTasks">
        <button class="list-group-item d-flex justify-content-between align-items-center Task"
          (click)="selectTaskAndToggleSidebar(task)">
          <div class="d-flex">
            <input type="checkbox" />
            <div class="ms-3">
              <h6 class="fw-bold text-start">{{ task.title }}</h6>
              <div class="d-flex">
                <i class="bi bi-calendar-x me-2"></i>
                <p class="mb-0">{{ task.endDate | date: 'dd/MM/yyyy' }}</p>
              </div>
            </div>
          </div>
          <i class="bi bi-caret-right"></i>
        </button>
      </div>
      <div *ngIf="thisWeekTasks.length === 0" class="text-muted text-center mt-2">
        Nenhuma tarefa para esta semana.
      </div>
    </div>
  </div>

  <!-- Sidebar Component -->
  <app-menu-side-bar></app-menu-side-bar>
  <app-task-sidebar
  [task]="selectedTask"
  [isOpen]="isSidebarOpen"
  (onClose)="handleSidebarClose()"
  [mode]="mode"
  (delete)="deleteTask(selectedTask?.id)"></app-task-sidebar>
</div>